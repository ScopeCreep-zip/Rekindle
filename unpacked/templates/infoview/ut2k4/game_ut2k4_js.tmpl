<script language="JavaScript">
<!--
	%include scripts/colorize.js%

	var game_icon_file_name		= "%game_iconfilename%";
	var game_has_password		= %game_haspassword%;
	var game_lock_icon_file_name = "%game_lockiconfilename%";
	var game_long_name			= "%js:game_longname%";
	var voice_has_ip			= %voice_hasip%;
	var text_voice_chat			= "%js:text_voicechat%";
	var voice_server_ip			= "%js:voice_serverip%";
	var game_has_ip				= %game_hasip%;
	var server_flag_url			= "%js:server_flag_url%";
	var country_code			= "%js:country_code%";
	var country_code_url		= "%js:country_code_url%";
	var text_server_ip			= "%js:text_serverip%";
	var game_server_ip			= "%js:game_serverip%";
	var game_has_query_status	= %game_hasquerystatus%;
	var text_server_query_status = "%js:text_serverquerystatus%";
	var game_server_query_status = "%js:game_serverquerystatus%";
	var game_has_server_name	= %game_hasservername%;
	var text_server_name		= "%js:text_servername%";
	var game_server_name		= "%js:game_servername%";
	var game_has_server_ping	= %game_hasserverping%;
	var text_server_ping		= "%js:text_serverping%";
	var game_server_ping		= "%js:game_serverping%";
	var game_has_server_info	= %game_hasserverinfo%;
	var text_server_info		= "%js:text_serverinfo%";
	var game_server_info		= "%game_serverinfo%";
	var game_has_server_game_type = %game_hasservergametype%;
	var text_server_game_type	= "%js:text_servergametype%";
	var game_server_game_type	= "%js:game_servergametype%";
	var text_player_list		= "%js:text_playerlist%"; 
	var team_list = [ %team_data_struct% ];
	var raw_serverinfo = { %raw_serverinfo% };
	// var team_list = [ 
	//					  {team_name: 'blue', players: [{name: 'chad', frags: 1, ping: 100}, {name: 'jose', frags: 2, ping: 200}]}, 
	//					  {team_name: 'red',  players: [{name: 'brandon', frags: -1, ping: 101}, {name: 'pepe', frags: -2, ping: 201}]}
	//				   ];
	
	var is_user_ingame			= %user_ingame%;
	var display_user			= "%js:display_user%";
	var user_has_profile		= %user_hasprofile%;
	var profile_url				= "%js:profile_url%";
	var username				= "%js:username%";
	var text_profile			= "%js:text_profile%";
	var user_has_nickname		= %user_hasnickname%;
	var text_user_name			= "%js:text_username%";
	var name_col				= "%js:text_name%";
	var ping_col				= "%js:text_ping%";
	var frags_col				= "%js:text_frags%";
	var total_frags_text		= "%js:text_totalfrags%";
	var has_custom_status		= %has_custom_status%;
	var custom_status			= "%js:custom_status%";
	var custom_status_text		= "%js:text_status%";		
	var has_game_stats_hash = %has_game_stats_hash%;	
	var game_stats_hash = { %game_stats_hash% };

	if (is_user_ingame == true)
	{
		document.write("<span class='user_title'>" + display_user + 
						"</span> <span class='user_profile_link'><a href='" + profile_url + username + "' target='_blank'>" + text_profile + 
						"</a></span><br><br>");
		
		if (user_has_nickname == true)
		{
			document.write("<span class='field_name'>" + text_user_name + ": </span>");
			document.write("<span class='user_data'>" + username + "<br></span>");
		}

		if (has_custom_status == true)
		{
			document.write("<span class='field_name'>" + custom_status_text + ": </span>");
			document.write("<span class='user_data'>" + linkify(custom_status) + "<br></span>");
		}
		
		if (voice_has_ip == true)
		{
			document.write("<span class='field_name'>" + text_voice_chat + ": </span>");
			document.write("<span class='user_data'>" + voice_server_ip + "<br></span>");
		}
	
	}
				
	if (game_has_ip == true)
	{
		document.write("<span class='field_name'>" + text_server_ip + ": </span>");
		if (server_flag_url.length > 0)
		{
			document.write("<span class='server_data'> <a href='" + country_code_url + "' target='_blank'><img src='" + server_flag_url + "' title='" + country_code + "' alt='' width='25' height='15' align='absbottom' border='0'></a> " + game_server_ip);
		}
		else
		{
			document.write("<span class='server_data'>" + game_server_ip);
		}
		
		if (game_has_password == true)
		{
			document.write("        <img src='" + game_lock_icon_file_name + "' title='' alt='gameicon' width='32' height='32' border='0'>");
		}
		document.write("<br></span>");
	}


	if (game_has_query_status == true)
	{
		document.write("<span class='field_name'>" + text_server_query_status + ": </span>");
		document.write("<span class='server_data'>" + game_server_query_status + "<br></span>");
	}

	if (game_has_server_name == true)
	{
		document.write("<span class='field_name'>" + text_server_name + ": </span>");
		document.write("<span class='server_data'>" + colorizeName(game_server_name,"%servertype%") + "<br></span>");
	}

	if (game_has_server_ping == true)
	{
		document.write("<span class='field_name'>" + text_server_ping + ": </span>");
		document.write("<span class='server_data'>" + game_server_ping + "<br></span>");
	}

	if (game_has_server_info == true)
	{
		document.write("<span class='field_name'>" + text_server_info + ": </span>");
		document.write("<span class='server_data'>" + game_server_info + "<br></span>");
	}

	if (game_has_server_game_type == true)
	{
		document.write("<span class='field_name'>" + text_server_game_type + ": </span>");
		document.write("<span class='server_data'>" + game_server_game_type + "<br></span>");
	}
	
	if (has_game_stats_hash)
	{
		for (var game_stats_key in game_stats_hash)
		{
			document.write("<span class='field_name'>" + game_stats_key + ": </span>");
			document.write("<span class='server_data'>" + game_stats_hash[game_stats_key] + "<br></span>");
		}
	}
	
	document.write("<br>\n");
	if (team_list.length > 0)
	{
		for (var i = 0; i < team_list.length; i++)
		{
			var nTeamFrags = 0;
			
			/* ALL OF THIS JUST TO MAKE A PRETYY LOOKING TABLE WITH BORDERS AND SHADING.  GOOD LUCK!!! */
			document.write('<table id="player_table" width="240px" border="0" cellspacing="0" cellpadding="0">');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_topleft" colspan="2" rowspan="2"></td>');
			document.write('	<td class="playertable_header_horzedge" colspan="2"></td>');
			document.write('	<td class="playertable_header_topright"></td>');
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_horzfiller" colspan="2"></td>');
			document.write('	<td class="playertable_header_vertedge_4tall"></td>');
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_vertedge"></td>');
			document.write('	<td class="playertable_header_vertfiller"></td>');

			if (team_list.length == 1)
			{
				document.write('	<td class="table_header">' + text_player_list + '</td>');
			}
			else
			{
				document.write('	<td class="table_header">' + team_list[i].team_name + '</td>');
			}
				
			document.write('	<td class="playertable_header_vertfiller"></td>');
			document.write('	<td class="playertable_header_vertedge"></td>');
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_vertedge_5tall" rowspan="2"></td>');
			document.write('	<td class="playertable_header_horzfiller" colspan="3"></td>');
			document.write('	<td class="playertable_header_vertedge_5tall" rowspan="2"></td>');
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_horzedge" colspan="3"></td>'); /* END OF SHADED HEADING SECTION OF TABLE... */
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_vertedge"></td>');
			document.write('	<td width="4px"></td>');
			document.write('	<td>');

			document.write('	  <table id="player_table_data" width="100%" border="0" cellspacing="0" cellpadding="0">');
			document.write('		<tr>');
			document.write('		  <td class="table_col_title" style="text-align:left">' + name_col + '</td>');
			document.write('		  <td class="table_col_title" style="text-align:right">' + ping_col + '</td>');
			document.write('		  <td class="table_col_title" style="text-align:right">' + frags_col + '</td>');
			document.write('		</tr>');
			document.write('		<tr>');

			for (var j = 0; j < team_list[i].players.length; j++)
			{
				nTeamFrags += team_list[i].players[j].frags;
				
				document.write('		  <td class="table_data" style="text-align:left">' + colorizeName(team_list[i].players[j].name,"%js:servertype%") + '</td>');
				document.write('		  <td class="table_data" style="text-align:right">' + team_list[i].players[j].ping + '</td>');
				document.write('		  <td class="table_data" style="text-align:right">' + team_list[i].players[j].frags + '</td>');
				document.write('		</tr>');
			}

			if (team_list.length > 1)
			{
				document.write('		<tr>');
				document.write('		  <td class="table_totals" colspan="2" align="right">' + total_frags_text + ':</td>');
				document.write('		  <td class="table_totals_data" align="right">' + nTeamFrags + '</td>');
				document.write('		</tr>');
			}
			
			document.write('	  </table>');
			document.write('	</td>');
			document.write('	<td width="4px"></td>');
			document.write('	<td class="playertable_header_vertedge"></td>');
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_vertedge_5tall" rowspan="2"></td>');
			document.write('	<td height="4px" colspan="3"></td>');
			document.write('	<td class="playertable_header_vertedge_5tall" rowspan="2"></td>');
			document.write('  </tr>');
			document.write('  <tr>');
			document.write('	<td class="playertable_header_horzedge" colspan="3"></td>');
			document.write('  </tr>');
			document.write('</table>');
			document.write("<br>");
		}
	}
	
//-->
</script>

